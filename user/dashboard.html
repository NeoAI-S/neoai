<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>NEO AI 프로세서 - 대시보드</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- SUIT Font -->
<style>
@font-face {
  font-family: 'SUIT-Regular';
  src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_suit@1.0/SUIT-Regular.woff2') format('woff2');
  font-display: swap;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'SUIT-Regular',sans-serif;
  background:
    radial-gradient(circle at 0% 0%, rgba(129,140,248,.25), transparent 55%),
    radial-gradient(circle at 100% 100%, rgba(52,211,153,.2), transparent 55%),
    linear-gradient(135deg,#eef2ff,#fefce8);
  color:#0f172a;
}
.shell{max-width:1000px;margin:0 auto;padding:18px}
.frame{
  background:rgba(255,255,255,.92);
  border-radius:26px;
  padding:20px;
  box-shadow:0 20px 60px rgba(0,0,0,.15)
}
.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px
}
.logo{font-weight:900;letter-spacing:.2em}
.logo span{color:#4f46e5}
.nav button{
  border:none;
  border-radius:999px;
  padding:8px 16px;
  margin-left:6px;
  background:#f3f4f6;
  cursor:pointer
}
.nav button.active{
  background:#111827;
  color:#fff
}
.card{
  background:#fff;
  border-radius:20px;
  padding:20px;
  margin-bottom:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.08)
}
.section-title{font-size:18px;font-weight:700}
.section-sub{font-size:13px;color:#6b7280;margin:6px 0 14px}
.value-row{display:flex;gap:14px;flex-wrap:wrap}
.value-box{
  flex:1;
  min-width:180px;
  background:#f9fafb;
  border-radius:16px;
  padding:14px
}
.value-label{font-size:12px;color:#6b7280}
.value-main{font-size:22px;font-weight:800}

.amount-muted{color:#4b5563}
.amount-positive{color:#059669;text-shadow:0 0 6px rgba(16,185,129,.35)}

.status-pill{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:4px 10px;
  border-radius:999px;
  font-size:12px
}
.status-dot{width:7px;height:7px;border-radius:50%}
.status-run{background:#dcfce7;color:#166534;border:1px solid #22c55e}
.status-run .status-dot{background:#22c55e}
.status-wait{background:#fef3c7;color:#92400e;border:1px solid #facc15}
.status-wait .status-dot{background:#facc15}
.status-done{background:#e5e7eb;color:#374151;border:1px solid #9ca3af}
.status-done .status-dot{background:#6b7280}

.steps-row{display:flex;gap:10px;flex-wrap:wrap}
.step{
  flex:1;
  min-width:160px;
  padding:12px;
  border-radius:14px;
  background:#f9fafb;
  border:1px solid #e5e7eb
}
.step.active{
  border-color:#4f46e5;
  background:#eef2ff
}
.hidden{display:none}

/* Intro */
.intro-grid{
  display:grid;
  grid-template-columns:1.2fr 1fr;
  gap:18px
}
.intro-box{
  background:#f9fafb;
  border-radius:16px;
  padding:14px;
  margin-top:10px
}
.intro-title{font-size:18px;font-weight:800}
.intro-text{font-size:14px;line-height:1.7;color:#374151;white-space:pre-line}
.scenario-highlight{color:#4f46e5;font-weight:700}

/* Account */
.account-grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px
}
.acct-label{font-size:12px;color:#6b7280}
.acct-value{font-size:14px;font-weight:600}
.btn-gear{
  border:none;
  border-radius:999px;
  padding:6px 10px;
  cursor:pointer
}

/* Modal */
.modal-backdrop{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.35);
  display:flex;
  align-items:center;
  justify-content:center
}
.modal{
  background:#fff;
  border-radius:18px;
  padding:18px;
  width:100%;
  max-width:360px
}
.modal input{
  width:100%;
  padding:8px;
  border-radius:10px;
  border:1px solid #d1d5db
}
.modal-actions{text-align:right;margin-top:12px}
</style>
</head>

<body>
<div class="shell">
<div class="frame">

<header class="topbar">
  <div class="logo"><span>NEO AI</span> PROCESSOR</div>
  <nav class="nav">
    <button id="tabStatus" class="active">AI 투자현황</button>
    <button id="tabIntro">소개</button>
    <button id="tabAccount">내 정보</button>
    <button id="btnLogout">로그아웃</button>
  </nav>
</header>

<!-- AI 투자현황 -->
<section id="sectionStatus" class="card">
  <div class="section-title">AI 투자현황</div>
  <div class="section-sub" id="nameLine"></div>
  <div class="value-row">
    <div class="value-box">
      <div class="value-label">AI 투자중인 금액</div>
      <div class="value-main" id="amountText">- 원</div>
    </div>
    <div class="value-box">
      <div class="value-label">진행 상태</div>
      <div id="statusBadge"></div>
    </div>
  </div>
</section>

<!-- 실시간 수익 -->
<section id="sectionRealtime" class="card">
  <div class="section-title">실시간 수익 현황</div>
  <div class="value-row">
    <div class="value-box">
      <div class="value-label">투자중인 금액</div>
      <div class="value-main amount-muted" id="investAmount">- 원</div>
    </div>
    <div class="value-box">
      <div class="value-label">수익 실현중인 금액</div>
      <div class="value-main" id="realizedAmount">- 원</div>
    </div>
    <div class="value-box">
      <div class="value-label">총 금액</div>
      <div class="value-main" id="totalAmount">- 원</div>
    </div>
  </div>
</section>

<!-- 세션 단계 -->
<section id="sectionSteps" class="card">
  <div class="section-title">AI 세션 진행 단계</div>
  <div class="steps-row">
    <div class="step" data-step="wait">1단계 · 대기중</div>
    <div class="step" data-step="run">2단계 · 진행중</div>
    <div class="step" data-step="done">3단계 · 진행 완료</div>
  </div>
</section>

<!-- 소개 -->
<section id="sectionIntro" class="card hidden">
  <div class="intro-title">네오AI, 스스로 판단하는 AI 투자 프로세서</div>
  <p class="intro-text">
네오AI는 대량의 시장 데이터와 딥러닝 알고리즘을 기반으로
시장 흐름을 분석하고 자동으로 분산 투자를 수행합니다.

사용자는 투자 금액만 정하면,
AI가 포트폴리오 구성부터 리스크 관리까지 전 과정을 담당합니다.
  </p>

  <div class="intro-box">
    <div class="scenario-highlight">투자 예시 · 50,000원</div>
    <p class="intro-text">
AI는 데이터를 스캔하고
여러 자산에 분산 투자하며
수익과 리스크를 자동으로 조절합니다.
    </p>
  </div>
</section>

<!-- 내 정보 -->
<section id="sectionAccount" class="card hidden">
  <div style="display:flex;justify-content:space-between">
    <div class="section-title">내 정보</div>
    <button class="btn-gear" id="btnOpenSettings">⚙ 설정</button>
  </div>
  <div class="account-grid">
    <div><div class="acct-label">이름</div><div class="acct-value" id="acctName"></div></div>
    <div><div class="acct-label">아이디</div><div class="acct-value" id="acctUsername"></div></div>
    <div><div class="acct-label">출금 계좌</div><div class="acct-value" id="acctBank"></div></div>
  </div>
</section>

</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const supabase = supabase.createClient(
  "https://uvwturgomovjvokojtkp.supabase.co",
  "sb_publishable_a6k4T2_-ksuHVUvCduUlCQ_DtoR9R4F"
);

const user = JSON.parse(localStorage.getItem("neoai_current_user"));
if(!user){location.href="index.html"}

function format(n){return Number(n).toLocaleString()+" 원"}

async function load(){
  const {data}=await supabase.from("users").select("*").eq("username",user.username).single();

  document.getElementById("nameLine").innerText=`${data.name}님의 AI 투자 진행 정보입니다.`;
  document.getElementById("amountText").innerText=format(data.amount);
  document.getElementById("investAmount").innerText=format(data.amount);
  document.getElementById("realizedAmount").innerText=format(data.realized_profit||0);
  document.getElementById("totalAmount").innerText=format(data.amount+(data.realized_profit||0));

  document.getElementById("realizedAmount").classList.add("amount-positive");
  document.getElementById("totalAmount").classList.add("amount-positive");

  document.getElementById("acctName").innerText=data.name;
  document.getElementById("acctUsername").innerText=data.username;
  document.getElementById("acctBank").innerText=data.bank_account||"-";

  const badge=document.getElementById("statusBadge");
  badge.innerHTML=`<span class="status-pill status-run"><span class="status-dot"></span>${data.status}</span>`;
}
load();

/* 탭 */
function show(t){
  ["sectionStatus","sectionRealtime","sectionSteps","sectionIntro","sectionAccount"].forEach(id=>{
    document.getElementById(id).classList.add("hidden")
  });
  document.getElementById(t).classList.remove("hidden")
}
tabStatus.onclick=()=>show("sectionStatus")
tabIntro.onclick=()=>show("sectionIntro")
tabAccount.onclick=()=>show("sectionAccount")
btnLogout.onclick=()=>{localStorage.clear();location.href="index.html"}
</script>
</body>
</html>
