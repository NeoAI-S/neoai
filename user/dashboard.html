<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>NEO AI í”„ë¡œì„¸ì„œ - ëŒ€ì‹œë³´ë“œ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; }

    /* ğŸ‘‡ ëˆˆëˆ„ ê¸°ì´ˆê³ ë”• ì›¹í°íŠ¸ (Noonnu Basic Gothic) */
    @font-face {
      font-family: 'NoonnuBasicGothic';
      src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noon-2410@1.0/NoonnuBasicGothicRegular.woff2') format('woff2');
      font-weight: normal;
      font-display: swap;
    }

    body {
      margin: 0;
      font-family: 'NoonnuBasicGothic', -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      min-height: 100vh;
      background:
        radial-gradient(circle at 0% 0%, rgba(129, 140, 248, 0.35), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(244, 114, 182, 0.3), transparent 55%),
        linear-gradient(135deg, #f9fafb, #eef2ff);
      color: #0f172a;
    }

    .shell {
      max-width: 960px;
      margin: 0 auto;
      padding: 22px 16px 40px;
    }

    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 18px;
    }

    .logo {
      font-weight: 800;
      font-size: 19px;
      letter-spacing: 0.18em;
    }
    .logo span {
      color: #0f172a;
      font-weight: 900;
      letter-spacing: 0.24em;
    }

    .nav {
      display: flex;
      gap: 8px;
      font-size: 13px;
    }
    .nav button {
      padding: 7px 14px;
      border-radius: 999px;
      border: 1px solid transparent;
      background: rgba(15, 23, 42, 0.02);
      cursor: pointer;
      font-size: 13px;
      transition: all 0.15s ease;
    }
    .nav button.active {
      background: #0f172a;
      color: #f9fafb;
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.35);
      transform: translateY(-1px);
    }
    .nav button:hover:not(.active) {
      background: rgba(15, 23, 42, 0.06);
    }

    .card {
      border-radius: 22px;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      box-shadow: 0 22px 45px rgba(15, 23, 42, 0.22);
      padding: 20px 18px 18px;
      margin-bottom: 14px;
      border: 1px solid rgba(255, 255, 255, 0.9);
    }

    .section-title {
      font-size: 15px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .section-sub {
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 14px;
    }

    .value-row {
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
      margin-top: 8px;
    }
    .value-box {
      flex: 1;
      min-width: 160px;
      padding: 14px 14px;
      border-radius: 16px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
    }
    .value-label {
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 4px;
    }
    .value-main {
      font-size: 18px;
      font-weight: 700;
    }

    .status-pill {
      display: inline-flex;
      align-items: center;
      padding: 4px 11px;
      border-radius: 999px;
      font-size: 12px;
      gap: 6px;
    }
    .status-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
    }
    .status-wait {
      background: #fef3c7;
      color: #92400e;
    }
    .status-wait .status-dot {
      background: #f59e0b;
    }
    .status-run {
      background: #dcfce7;
      color: #166534;
    }
    .status-run .status-dot {
      background: #22c55e;
    }
    .status-done {
      background: #e5e7eb;
      color: #374151;
    }
    .status-done .status-dot {
      background: #6b7280;
    }

    .info-text {
      font-size: 12px;
      color: #6b7280;
      margin-top: 10px;
      line-height: 1.6;
    }

    /* ì†Œê°œ ì„¹ì…˜ */
    .intro-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 18px;
    }
    @media (max-width: 720px) {
      .intro-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }
    .intro-badge {
      display: inline-flex;
      padding: 4px 11px;
      border-radius: 999px;
      font-size: 11px;
      background: rgba(79, 70, 229, 0.08);
      color: #4f46e5;
      margin-bottom: 10px;
    }
    .intro-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 8px;
    }
    .intro-text {
      font-size: 13px;
      color: #4b5563;
      line-height: 1.7;
      white-space: pre-line;
    }
    .intro-points {
      font-size: 12px;
      color: #374151;
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .intro-points li {
      margin-bottom: 6px;
    }
    .intro-tag {
      display: inline-block;
      padding: 4px 9px;
      border-radius: 999px;
      background: #fef3c7;
      font-size: 11px;
      color: #92400e;
      margin-right: 4px;
      margin-top: 4px;
    }

    .hidden { display: none; }
  </style>
</head>
<body>
  <div class="shell">
    <header class="topbar">
      <div class="logo"><span>NEO AI</span> PROCESSOR</div>
      <nav class="nav">
        <!-- ìˆœì„œ: AI íˆ¬ìí˜„í™©, ì†Œê°œ, ë¡œê·¸ì•„ì›ƒ -->
        <button id="tabStatus" class="active">AI íˆ¬ìí˜„í™©</button>
        <button id="tabIntro">ì†Œê°œ</button>
        <button id="btnLogout">ë¡œê·¸ì•„ì›ƒ</button>
      </nav>
    </header>

    <!-- AI íˆ¬ìí˜„í™© ì„¹ì…˜ -->
    <section id="sectionStatus" class="card">
      <div class="section-title">AI íˆ¬ìí˜„í™©</div>

      <div class="value-row">
        <div class="value-box">
          <div class="value-label">AIíˆ¬ìì¤‘ì¸ ê¸ˆì•¡</div>
          <div class="value-main" id="amountText">- ì›</div>
        </div>
        <div class="value-box">
          <div class="value-label">ì§„í–‰ ìƒíƒœ</div>
          <div id="statusBadge"></div>
        </div>
      </div>

      <div class="info-text" id="approvalInfo"></div>
    </section>

    <!-- ì†Œê°œ ì„¹ì…˜ -->
    <section id="sectionIntro" class="card hidden">
      <div class="intro-badge">AI ê¸°ë°˜ ìë™ íˆ¬ì í”„ë¡œì„¸ìŠ¤</div>
      <div class="intro-grid">
        <div>
          <div class="intro-title">ë„¤ì˜¤AI, ìŠ¤ìŠ¤ë¡œ íŒë‹¨í•˜ê³  ë¶„ì‚° íˆ¬ìí•˜ëŠ” ì¸ê³µì§€ëŠ¥</div>
          <p class="intro-text">
ë„¤ì˜¤AIëŠ” ëŒ€ëŸ‰ì˜ ì‹œì¥ ë°ì´í„°ì™€ ë”¥ëŸ¬ë‹ ì•Œê³ ë¦¬ì¦˜ì„ í™œìš©í•´ì„œ
ì‹œì¥ íë¦„ì„ ë¶„ì„í•˜ê³ , ì—¬ëŸ¬ ì¢…ëª©ê³¼ ìì‚°êµ°ì— ìë™ìœ¼ë¡œ ë¶„ì‚° íˆ¬ìí•˜ëŠ”
AI íˆ¬ì í”„ë¡œì„¸ì„œì…ë‹ˆë‹¤.

ì‚¬ìš©ìëŠ” íˆ¬ì ê¸ˆì•¡ê³¼ ê¸°ê°„ë§Œ ì„¤ì •í•˜ë©´,
AIê°€ í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„±ë¶€í„° ë¦¬ìŠ¤í¬ ê´€ë¦¬ê¹Œì§€ ì „ ê³¼ì •ì„ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•˜ë„ë¡ ì„¤ê³„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
          </p>
        </div>
        <div>
          <ul class="intro-points">
            <li>Â· ê²½ì œ ì§€í‘œ / ë‰´ìŠ¤ / ì‹œí™© ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ ë¶„ì„</li>
            <li>Â· ìµœëŒ€ 30ê°œ ë‚´ì™¸ ì¢…ëª©ìœ¼ë¡œ AI ë¶„ì‚° íˆ¬ì</li>
            <li>Â· ìµœì†Œ 1ì‹œê°„ ~ ìµœëŒ€ 12ì¼ êµ¬ê°„ë³„ ìš´ìš©</li>
            <li>Â· êµ¬ê°„ë³„ ì„±ê³¼ë¥¼ ë°˜ë³µ í•™ìŠµí•´ ì „ëµ ê³ ë„í™”</li>
            <li>Â· ìœ ì €ëŠ” â€œì–¼ë§ˆë¥¼, ì–¼ë§ˆë‚˜ ë§¡ê¸¸ì§€â€ë§Œ ê²°ì •</li>
          </ul>
          <div style="margin-top:10px;">
            <span class="intro-tag">ì¸ê³µì§€ëŠ¥ ë¶„ì„</span>
            <span class="intro-tag">í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì‚°</span>
            <span class="intro-tag">AI ë¦¬ìŠ¤í¬ ê´€ë¦¬</span>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Supabase + ëŒ€ì‹œë³´ë“œ ë¡œì§ -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const supabaseUrl = 'https://uvwturgomovjvokojtkp.supabase.co';
    const supabaseKey = 'sb_publishable_a6k4T2_-ksuHVUvCduUlCQ_DtoR9R4F';
    const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

    let currentUser = null;

    function requireLogin() {
      const raw = localStorage.getItem('neoai_current_user');
      if (!raw) {
        alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
        window.location.href = 'index.html';
        return;
      }
      try {
        currentUser = JSON.parse(raw);
      } catch {
        localStorage.removeItem('neoai_current_user');
        window.location.href = 'index.html';
      }
    }

    function formatAmount(value) {
      if (value == null || isNaN(value)) return '- ì›';
      return Number(value).toLocaleString('ko-KR') + ' ì›';
    }

    function renderStatus(status) {
      const badge = document.getElementById('statusBadge');
      badge.innerHTML = '';

      const wrapper = document.createElement('span');
      wrapper.classList.add('status-pill');

      const dot = document.createElement('span');
      dot.classList.add('status-dot');

      const text = document.createElement('span');

      if (!status || status === 'ëŒ€ê¸°ì¤‘') {
        wrapper.classList.add('status-wait');
        text.textContent = 'ëŒ€ê¸°ì¤‘';
      } else if (status === 'ì§„í–‰ì¤‘') {
        wrapper.classList.add('status-run');
        text.textContent = 'ì§„í–‰ì¤‘';
      } else {
        wrapper.classList.add('status-done');
        text.textContent = 'ì§„í–‰ ì™„ë£Œ';
      }

      wrapper.appendChild(dot);
      wrapper.appendChild(text);
      badge.appendChild(wrapper);
    }

    async function loadStatus() {
      const amountText = document.getElementById('amountText');
      const approvalInfo = document.getElementById('approvalInfo');

      try {
        const { data, error } = await supabase
          .from('users')
          .select('amount, status, approved, name, username')
          .eq('id', currentUser.id)
          .single();

        if (error || !data) {
          console.error(error);
          amountText.textContent = '- ì›';
          approvalInfo.textContent = 'íˆ¬ì ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
          return;
        }

        amountText.textContent = formatAmount(data.amount);
        renderStatus(data.status);

        const displayName = data.name || data.username || '';

        if (!data.approved) {
          approvalInfo.textContent =
            `${displayName ? displayName + 'ë‹˜ì€ ' : ''}í˜„ì¬ ê´€ë¦¬ì ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤. ìŠ¹ì¸ ì™„ë£Œ í›„ë¶€í„° AI íˆ¬ì ì§„í–‰ì´ ì‹œì‘ë©ë‹ˆë‹¤.`;
        } else {
          approvalInfo.textContent =
            `${displayName ? displayName + 'ë‹˜ì˜ ' : ''}AI íˆ¬ì ì§„í–‰ ìƒí™©ì€ ê´€ë¦¬ìì—ì„œ ë³€ê²½ë˜ë©°, ë¡œê·¸ì¸ ì‹œì  ê¸°ì¤€ìœ¼ë¡œ ìµœì‹  ìƒíƒœê°€ ë°˜ì˜ë©ë‹ˆë‹¤.`;
        }
      } catch (e) {
        console.error(e);
        approvalInfo.textContent = 'ì„œë²„ì™€ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
      }
    }

    // íƒ­ ì „í™˜
    const tabStatus = document.getElementById('tabStatus');
    const tabIntro = document.getElementById('tabIntro');
    const sectionStatus = document.getElementById('sectionStatus');
    const sectionIntro = document.getElementById('sectionIntro');

    tabStatus.addEventListener('click', () => {
      tabStatus.classList.add('active');
      tabIntro.classList.remove('active');
      sectionStatus.classList.remove('hidden');
      sectionIntro.classList.add('hidden');
    });

    tabIntro.addEventListener('click', () => {
      tabIntro.classList.add('active');
      tabStatus.classList.remove('active');
      sectionIntro.classList.remove('hidden');
      sectionStatus.classList.add('hidden');
    });

    document.getElementById('btnLogout').addEventListener('click', () => {
      localStorage.removeItem('neoai_current_user');
      alert('ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.');
      window.location.href = 'index.html';
    });

    requireLogin();
    loadStatus();
  </script>
</body>
</html>
